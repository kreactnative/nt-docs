{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Nathalin docs","text":""},{"location":"about/","title":"About","text":""},{"location":"k8s-backup-restore/","title":"Backup-Restore","text":""},{"location":"k8s-backup-restore/#install-velero-minio","title":"install velero (minio)","text":""},{"location":"k8s-backup-restore/#client-tools-macos","title":"client tools Macos","text":"<pre><code>brew install velero\n</code></pre>"},{"location":"k8s-backup-restore/#create-credential-credentials-velero","title":"create credential credentials-velero","text":"<pre><code>[default]\naws_access_key_id = minio\naws_secret_access_key = minio123\n</code></pre>"},{"location":"k8s-backup-restore/#recheck-secrer","title":"recheck secrer","text":"<pre><code>kubectl create secret generic cloud-credentials --from-file=credentials-velero -n velero\n</code></pre> <pre><code>kubectl apply -f minio-deployment.yaml\n</code></pre>"},{"location":"k8s-backup-restore/#install-velero","title":"install velero","text":"<pre><code>velero install \\\n    --provider aws \\\n    --plugins velero/velero-plugin-for-aws:v1.2.1 \\\n    --bucket velero \\\n    --secret-file ./credentials-velero \\\n    --use-volume-snapshots=false \\\n    --backup-location-config region=minio,s3ForcePathStyle=\"true\",s3Url=http://minio.velero.svc:9000\n</code></pre>"},{"location":"k8s-backup-restore/#backup","title":"backup","text":"<pre><code>velero backup create {{backup-name}}\nvelero backup describe  {{backup-name}}\n</code></pre>"},{"location":"k8s-backup-restore/#copy-pod-backups-file-to-local","title":"copy pod backups file to local","text":"<pre><code>kubectl -n velero cp {{minio podname}}:/storage /Users/dotnetnat/projects/temp/do-velero-backups/\n</code></pre>"},{"location":"k8s-backup-restore/#copy-backups-file-to-kube-pod","title":"copy backups file to kube pod","text":"<pre><code>kubectl cp /Users/dotnetnat/projects/temp/do-velero-backups/velero/backups velero/minio-8649b94fb5-frjnm:/storage/velero/backups\n</code></pre>"},{"location":"k8s-backup-restore/#restore-if-diference-env-copy-from-backup","title":"restore (if diference env copy from backup)","text":"<pre><code>velero restore create --from-backup {{backup-name}}\n</code></pre>"},{"location":"k8s-neo4j/","title":"Neo4j","text":""},{"location":"k8s-neo4j/#install-single","title":"install single","text":"<pre><code>helm upgrade --install neo4j-community equinor-charts/neo4j-community --set acceptLicenseAgreement=yes --set neo4jPassword=NT123### --namespace dbs --create-namespace\n</code></pre>"},{"location":"k8s-overview/","title":"Overview","text":""},{"location":"k8s-upgrade/","title":"Upgrade","text":""},{"location":"k8s-upgrade/#unlock-version","title":"unlock version","text":"<pre><code>yum versionlock clear\n</code></pre>"},{"location":"k8s-upgrade/#check-version","title":"check version","text":"<pre><code>yum list --showduplicates kubeadm --disableexcludes=kubernetes\n</code></pre>"},{"location":"k8s-upgrade/#upgrading-master-node-01","title":"Upgrading master node 01","text":"<pre><code>yum install -y kubeadm-1.27.3-0 --disableexcludes=kubernetes\nkubeadm version\nkubeadm upgrade plan\nsudo kubeadm upgrade apply v1.27.3\nyum install -y kubelet-1.27.3-0 kubectl-1.27.3-0 --disableexcludes=kubernetes\nsudo dnf versionlock kubelet kubeadm kubectl\nsudo systemctl daemon-reload\nsudo systemctl restart kubelet\n</code></pre>"},{"location":"k8s-upgrade/#upgrading-master-node-other","title":"Upgrading master node other","text":"<pre><code>yum install -y kubeadm-1.27.3-0 --disableexcludes=kubernetes\nkubeadm version\nkubeadm upgrade plan\nsudo kubeadm upgrade node\nyum install -y kubelet-1.27.3-0 kubectl-1.27.3-0 --disableexcludes=kubernetes\nsudo dnf versionlock kubelet kubeadm kubectl\nsudo systemctl daemon-reload\nsudo systemctl restart kubelet\n</code></pre>"},{"location":"k8s-upgrade/#upgrade-worker-node","title":"upgrade worker node","text":"<pre><code>yum install -y kubeadm-1.27.3-0 --disableexcludes=kubernetes\nsudo kubeadm upgrade node\nyum install -y kubelet-1.27.3-0 kubectl-1.27.3-0 --disableexcludes=kubernetes\nsudo dnf versionlock kubelet kubeadm kubectl\nsudo systemctl daemon-reload\nsudo systemctl restart kubelet\n\n</code></pre>"}]}